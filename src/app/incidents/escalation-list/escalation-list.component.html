<div class="content p-6">
  <h2 class="text-gray-200 text-2xl font-semibold mb-4">Escalated Incidents</h2>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-container text-gray-300">
    <p>Loading escalated incidents...</p>
    <p-progressSpinner strokeWidth="5"></p-progressSpinner>
  </div>

  <!-- Escalated Incidents Table -->
  <p-table *ngIf="!loading && escalatedIncidents.length > 0" 
           [value]="paginatedEscalatedIncidents" 
           [paginator]="true" 
           [rows]="rows"  
           [rowsPerPageOptions]="[10, 20, 30]" 
           [(first)]="first" 
           [totalRecords]="totalRecords"  
           (onPage)="onPageChange($event)"  
           responsiveLayout="scroll" 
           class="bg-gray-800 text-gray-300 p-table">
    <ng-template pTemplate="header">
      <tr>
        <th class="bg-gray-900 text-gray-200 p-2">ID</th>
        <th class="bg-gray-900 text-gray-200 p-2">Title</th>
        <th class="bg-gray-900 text-gray-200 p-2">Status</th>
        <th class="bg-gray-900 text-gray-200 p-2">Severity</th>
        <th class="bg-gray-900 text-gray-200 p-2">Escalated To</th>
        <th class="bg-gray-900 text-gray-200 p-2">Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-incident>
      <tr class="hover:bg-gray-700">
        <td class="p-2">{{ incident.id }}</td>
        <td class="p-2">{{ incident.title }}</td>
        <td class="p-2">{{ incident.status }}</td>
        <td class="p-2">{{ incident.severity }}</td>
        <td class="p-2">{{ incident.escalatedTo }}</td>
        <td class="p-2">
          <button pButton 
                  label="View Details" 
                  icon="pi pi-eye" 
                  class="p-button-info p-mr-2" 
                  [routerLink]="['/incident', incident.id]">
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <!-- No Escalated Incidents Message -->
  <div *ngIf="!loading && escalatedIncidents.length === 0" class="text-gray-300">
    <p>No escalated incidents found for the logged-in user.</p>
  </div>
</div>
