<form #incidentForm="ngForm" (ngSubmit)="onSubmit(incidentForm)" class="bg-gray-800 p-6 rounded-lg shadow-md">
  <div class="flex flex-wrap gap-4 mb-4 text-gray-200">

    <!-- Title and Description (Row 1) -->
    <div class="flex w-full gap-4">
      <div class="w-1/2">
        <label for="title" class="block mb-2 font-semibold">Title:</label>
        <input
          type="text"
          id="title"
          name="title"
          [(ngModel)]="incident.title"
          required
          pInputText
          class="dark-input p-2 rounded-md w-full bg-gray-700 text-gray-300 border border-gray-600 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div class="w-1/2">
        <label for="description" class="block mb-2 font-semibold">Description:</label>
        <textarea
          id="description"
          name="description"
          [(ngModel)]="incident.description"
          required
          rows="4" 
          pInputTextarea
          class="dark-input p-2 rounded-md w-full bg-gray-700 text-gray-300 border border-gray-600 focus:ring-2 focus:ring-blue-500 resize-vertical"
        ></textarea>
      </div>
    </div>

    <!-- Status and Severity (Row 2) -->
    <div class="flex w-full gap-4">
      <div class="w-1/2">
        <label for="location" class="block mb-2 font-semibold">Location:</label>
        <input
          type="text"
          id="location"
          name="location"
          [(ngModel)]="incident.location"
          required
          pInputText
          class="dark-input p-2 rounded-md w-full bg-gray-700 text-gray-300 border border-gray-600 focus:ring-2 focus:ring-blue-500"
        />
      </div>
    

      <div class="w-1/2">
        <label for="severity" class="block mb-2 font-semibold">Severity:</label>
        <select
          id="severity"
          name="severity"
          [(ngModel)]="incident.severity"
          required
          class="dark-input p-2 rounded-md w-full bg-gray-700 text-gray-300 border border-gray-600 focus:ring-2 focus:ring-blue-500"
        >
          <option value="" disabled>Select Severity</option>
          <option *ngFor="let severity of severityOptions" [value]="severity.value">
            {{ severity.label }}
          </option>
        </select>
      </div>
      
    </div>

    <!-- Assignee and Affected System (Row 3) -->
    <div class="flex w-full gap-4">
      <div class="w-1/2">
        <label for="assignee" class="block mb-2 font-semibold">Assigned To:</label>
        <input
          type="text"
          id="assignee"
          name="assignee"
          [(ngModel)]="incident.assignee"
          required
          pInputText
          class="dark-input p-2 rounded-md w-full bg-gray-700 text-gray-300 border border-gray-600 focus:ring-2 focus:ring-blue-500"
          readonly 
        />
      </div>

      <div class="w-1/2">
        <label for="affectedSystem" class="block mb-2 font-semibold">Affected System:</label>
        <input
          type="text"
          id="affectedSystem"
          name="affectedSystem"
          [(ngModel)]="incident.affectedSystem"
          required
          pInputText
          class="dark-input p-2 rounded-md w-full bg-gray-700 text-gray-300 border border-gray-600 focus:ring-2 focus:ring-blue-500"
        />
      </div>
    </div>

    <!-- Location and Created At (Row 4) -->


    <!-- Last Updated At (Row 5) -->
    <div class="flex w-full gap-4">
      <div class="w-1/2">
        <p>Status: <strong class="text-green-400">{{ incident.status }}</strong></p>
      </div>
 
    </div>
  </div>

  <!-- Loading indicator -->
  <div *ngIf="loading" class="loading-container text-gray-300">
    <p>Generating Incident...</p>
    <p-progressSpinner strokeWidth="5" styleClass="custom-spinner"></p-progressSpinner>
  </div>

  <!-- Toast notification -->
  <p-toast></p-toast>

  <div class="flex flex-wrap gap-3 mt-4 mb-5">
    <p-button
      label="Create Incident"
      type="submit"
      [disabled]="incidentForm.invalid || loading"
      class="p-button-success createButton"
    ></p-button>
  </div>
</form>
