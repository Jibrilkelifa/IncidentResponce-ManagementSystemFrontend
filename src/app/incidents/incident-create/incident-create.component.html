<form #incidentForm="ngForm" (ngSubmit)="onSubmit(incidentForm)">
  <div class="flex flex-wrap gap-3 mb-2">

    <div class="flex-auto">
      <label for="title" class="block mb-2">Title:</label>
      <input
        type="text"
        id="title"
        name="title"
        [(ngModel)]="incident.title"
        required
        pInputText
        [style]="{ width: '30vw', height: '45px' }"
      />
    </div>

    <div class="flex-auto">
      <label for="description" class="block mb-2">Description:</label>
      <input
        type="text"
        id="description"
        name="description"
        [(ngModel)]="incident.description"
        required
        pInputText
        [style]="{ width: '30vw', height: '45px' }"
      />
    </div>

    <div class="flex-auto">
      <p>Status: <strong>{{ incident.status }}</strong></p> <!-- Display current status -->
    </div>

    <div class="flex-auto">
      <label for="severity" class="block mb-2">Severity:</label>
      <input
        type="text"
        id="severity"
        name="severity"
        [(ngModel)]="incident.severity"
        required
        pInputText
        [style]="{ width: '30vw', height: '45px' }"
      />
    </div>

    <div class="flex-auto">
      <label for="assignee" class="block mb-2">Assigned To:</label>
      <input
        type="text"
        id="assignee"
        name="assignee"
        [(ngModel)]="incident.assignee"
        required
        pInputText
        [style]="{ width: '30vw', height: '45px' }"
      />
    </div>

    <div class="flex-auto">
      <label for="affectedSystem" class="block mb-2">Affected System:</label>
      <input
        type="text"
        id="affectedSystem"
        name="affectedSystem"
        [(ngModel)]="incident.affectedSystem"
        required
        pInputText
        [style]="{ width: '30vw', height: '45px' }"
      />
    </div>

    <div class="flex-auto">
      <label for="location" class="block mb-2">Location:</label>
      <input
        type="text"
        id="location"
        name="location"
        [(ngModel)]="incident.location"
        required
        pInputText
        [style]="{ width: '30vw', height: '45px' }"
      />
    </div>

    <div class="flex-auto">
      <label for="createdAt" class="block mb-2">Created At:</label>
      <p-calendar
        id="createdAt"
        name="createdAt"
        [(ngModel)]="incident.createdAt"
        [style]="{ width: '30vw', height: '45px' }"
        [showIcon]="true"
        [dateFormat]="'yy-mm-dd'"
        [showTime]="false"
        [selectionMode]="'single'"
        [required]="true"
      ></p-calendar>
    </div>

    <div class="flex-auto">
      <label for="updatedAt" class="block mb-2">Last Updated At:</label>
      <p-calendar
        id="updatedAt"
        name="updatedAt"
        [(ngModel)]="incident.updatedAt"
        [style]="{ width: '30vw', height: '45px' }"
        [showIcon]="true"
        [dateFormat]="'yy-mm-dd'"
        [showTime]="false"
        [selectionMode]="'single'"
        [required]="true"
      ></p-calendar>
    </div>

  </div>

  <!-- Show loading indicator when generating schedule -->
  <div *ngIf="loading" class="loading-container">
    <p>Generating Incident...</p>
    <p-progressSpinner strokeWidth="5" styleClass="custom-spinner"></p-progressSpinner>
  </div>

  <!-- Display message using Toast -->
  <p-toast></p-toast>

  <div class="flex flex-wrap gap-3 mt-4 mb-5">
    <p-button
      label="Create Incident"
      type="submit"
      [disabled]="incidentForm.invalid || loading"
      class="createButton"
    ></p-button>
  </div>
</form>
