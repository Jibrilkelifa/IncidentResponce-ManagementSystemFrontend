<h2 class="text-gray-200 text-xl font-semibold mb-4">Alert List</h2>

<!-- Search and Filter Buttons -->
<div class="mb-4 flex flex-wrap items-center space-x-4">
  <!-- Search Field -->
</div>

<!-- Display Empty State -->
<div *ngIf="alerts.length === 0" class="text-center text-gray-300 mt-6">
  <p>No alerts available.</p>
</div>

<!-- Alert List Table -->
<p-table
  [value]="paginatedAlerts"
  responsiveLayout="scroll"
  class="bg-gray-800 text-gray-300 p-table"
  [rows]="pageSize"
>
  <ng-template pTemplate="header">
    <tr>
      <th class="bg-gray-900 text-gray-200 p-2" pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
      <th class="bg-gray-900 text-gray-200 p-2" pSortableColumn="alertName">Title <p-sortIcon field="alertName"></p-sortIcon></th>
      <th class="bg-gray-900 text-gray-200 p-2" pSortableColumn="state">State <p-sortIcon field="state"></p-sortIcon></th>
      <th class="bg-gray-900 text-gray-200 p-2" pSortableColumn="activeAt">Triggered At <p-sortIcon field="activeAt"></p-sortIcon></th>
      <th class="bg-gray-900 text-gray-200 p-2" pSortableColumn="host">Host <p-sortIcon field="host"></p-sortIcon></th>
      <th class="bg-gray-900 text-gray-200 p-2" pSortableColumn="source">Source <p-sortIcon field="source"></p-sortIcon></th>
      <th class="bg-gray-900 text-gray-200 p-2" pSortableColumn="grafanaFolder">Grafana Folder <p-sortIcon field="grafanaFolder"></p-sortIcon></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-alert>
    <tr class="hover:bg-gray-700 border-b border-gray-600">
      <td class="p-2">{{ alert.id }}</td>
      <td class="p-2">{{ alert.alertName }}</td>
      <td class="p-2">
        <span
          class="px-2 py-1 rounded text-sm"
          [ngClass]="{
            'bg-red-500 text-gray-100': alert.state === 'alerting',
            'bg-yellow-500 text-gray-900': alert.state === 'normal',
            'bg-green-500 text-gray-900': alert.state === 'ok'
          }"
        >
          {{ alert.state }}
        </span>
      </td>
      <td class="p-2">{{ alert.activeAt | date: 'short' }}</td>
      <td class="p-2">{{ alert.host }}</td>
      <td class="p-2">{{ alert.source }}</td>
      <td class="p-2">{{ alert.grafanaFolder }}</td>
    </tr>
  </ng-template>
</p-table>

<!-- Custom Pagination -->
<div *ngIf="totalPages.length > 1" class="flex justify-center mt-4">
  <ul class="inline-flex space-x-2">
    <li>
      <button
        (click)="prevPage()"
        class="px-3 py-2 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 disabled:opacity-50"
        [disabled]="currentPage === 0"
      >
        Previous
      </button>
    </li>
    <li *ngFor="let page of visiblePages">
      <button
        *ngIf="page !== -1"
        (click)="goToPage(page)"
        class="px-3 py-2 rounded-md"
        [ngClass]="{
          'bg-blue-500 text-white': page === currentPage,
          'bg-gray-700 text-gray-300 hover:bg-gray-600': page !== currentPage
        }"
      >
        {{ page + 1 }}
      </button>
      <span *ngIf="page === -1" class="px-3 py-2 text-gray-500">...</span>
    </li>
    <li>
      <button
        (click)="nextPage()"
        class="px-3 py-2 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 disabled:opacity-50"
        [disabled]="currentPage >= totalPages.length - 1"
      >
        Next
      </button>
    </li>
  </ul>
</div>
